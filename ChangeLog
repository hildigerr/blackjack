2004-03-08  Callum McKenzie  <callum@physics.otago.ac.nz>

	* NEWS:
	* README: 2.5.8.

2004-02-25  Callum McKenzie  <callum@physics.otago.ac.nz>

	* C/blackjack.xml: Updated to 2.6.

2004-02-22  Callum McKenzie  <callum@physics.otago.ac.nz>

	* src/events.cpp:
	* src/blackjack.cpp: Move the intialisation of draw_gc to the
	configure callback and remove the explicit call to
	gtk_widget_realize. This avoids the (erratic) warnings when the
	expose event (from the explicit realize) gets called before the
	configure event.

2004-02-21  Callum McKenzie  <callum@physics.otago.ac.nz>

	* src/menu.cpp: Removed warning about unused function by removing
	it with #if 0.

2004-02-20  William Jon McCann  <mccann@jhu.edu>

	* src/hand.cpp (bj_hand_finish_play): Only set the player to
	the next player if it is not NULL.  Fixes bug #134488.

	* src/events.cpp: Properly initialize variables.  Fixes bug #125523.
	(handle_slot_pressed): Remove debug print statement.

2004-02-16  Callum McKenzie  <callum@physics.otago.ac.nz>

	* NEWS: Time for 2.5.6.

2004-02-14  Callum McKenzie  <callum@physics.otago.ac.nz>

	* src/game.cpp:
	* src/dialog.cpp:
	* src/card.cpp: Removed the has_separator call from the message
	dialogs.

2004-02-11  Callum McKenzie  <callum@physics.otago.ac.nz>

	* src/menu.cpp (help_about_callback): Add translator credits.

2004-02-07  Callum McKenzie  <callum@physics.otago.ac.nz>

	* gdk-card-image.c (gtk_card_deck_options_edit_create_list): That
	was silly. Remove the extra, untyped, column in gtk_list_store_new
	(). Fixes bug #133687.

2004-02-05  Callum McKenzie  <callum@physics.otago.ac.nz>

	* TODO: Complete bug triage for the final 2.5 push.

2004-02-04  William Jon McCann  <mccann@jhu.edu>

	* src/player.cpp (reset): Load new XML cache file.

	* src/game.cpp (bj_game_get_config_dir)
	(bj_game_ensure_config_dir_exists): New functions
	(bj_game_eval_installed_file): Generate cache file if it
	is not found.

2004-02-03  William Jon McCann  <mccann@jhu.edu>

	* src/player.cpp (LoadablePlayer, reset):
	Use and check return value.
	(saveHandXML, savePlayerHandCountXML, saveCountXML)
	(saveValueSplitXML, saveResplitXML, saveOverallValuesXML)
	(saveOverallValueXML, savePlayerHandsXML, saveXML)
	(load_array_from_string, parse_hand, parse_hands)
	(parse_hand_count, parse_value_split, parse_resplit)
	(parse_overall_values, parse_overall_value, parse_document)
	(loadXML): New functions to support saving and loading XML
	cache files.

	* src/hand.cpp (bj_hand_show_options)
	(bj_hand_get_best_option_string, bj_hand_new5): Add some checks
	for NULL strategy.

2004-02-02  Callum McKenzie  <callum@physics.otago.ac.nz>

	* gdk-card-image.c: Replaced references to g_basename. See bug
	#133176.

2004-01-31  Callum McKenzie  <callum@physics.otago.ac.nz>

	* games-files.c (games_image_suffix_list_init): Release the mutex
	on an early return. Fixes bug #132937.

2004-01-29  Callum McKenzie  <callum@physics.otago.ac.nz>

	* card-style-file.c:
	* gdk-card-image.c:
	* card-styles.xml.in: Updates to let the strings in
	card-styles.xml to be translated.

2004-01-12  William Jon McCann  <mccann@jhu.edu>

	* src/card.cpp (bj_card_load_pixmaps): Added error checking and
	report dialog.

2004-01-11  Callum McKenzie  <callum@physics.otago.ac.nz>

	* NEWS: 2.5.4.

2003-12-29  Callum McKenzie  <callum@physics.otago.ac.nz>

	* NEWS: 2.5.3.

2003-12-28  William Jon McCann  <mccann@jhu.edu>

	* src/hand.cpp (bj_hand_show_options):
	(bj_hand_new5, bj_hand_new, bj_hand_finish, bj_hand_split):
	* src/events.cpp (drop_moving_chips):
	* src/dialog.cpp (pref_dialog_response, show_preferences_dialog):
	* src/slot.cpp (bj_slot_add_before_slot):
	* src/blackjack.cpp (bj_gconf_init):
	* src/game.cpp (bj_game_new):
	Remove unused variables.

	* src/hand.cpp (bj_hand_new5): Always set the playing area text
	whether it is displayed or not.  Fixes a bug introduced by last
	change.


2003-12-20  William Jon McCann  <mccann@jhu.edu>

	* src/hand.cpp (bj_hand_hit, bj_hand_double, bj_hand_finish_play):
	* src/draw.cpp (bj_draw_set_dealer_text, bj_draw_set_player_text)
	(bj_draw_paint_text, bj_draw_take_snapshot, bj_draw_refresh_screen):
	Use new approach for creating the text on the playing area.  Instead
	of having the hand and dealer methods called to update the text
	on screen for every screen update, have the hand and dealer set
	the markup text after every play and let the screen update render
	that when needed.  This allows the positioning of the pango layout
	to happen in draw.cpp.  And that allows positioning to scale with
	font size.

	* src/player.cpp (showProbabilities, showOptions):
	(showCount):
	Use monospace font family instead of fixed.  Use non-white color so
	that text will show up against white card if necessary.  Make
	headings bold.  Make best option bold.  Don't use a fixed font
	size.

	* src/dialog.cpp (get_insurance_choice): Insurance is for suckers or
	counters.  Make the default answer no.

2003-12-18  William Jon McCann  <mccann@jhu.edu>

	* src/menu.cpp (help_about_callback): Remove email addresses from main
	screen for space reasons.  Use angle brackets around email in credits.

	* src/game.cpp (bj_game_new): Fix leaks.

2003-12-17  Callum McKenzie  <callum@physics.otago.ac.nz>

	* gdk-card-image.c: Removed the dependence on an internal
	knowledge of GamesFileList.

	* games-files.c:
	* games-files.h: Convert games_files_list to a proper gobject.
	Added games_file_list_get_nth and games_file_list_for_each.
	Removed games_file_list_new_short and games_file_list_free (use
	g_object_unref). Also added file name transformation flags to
	*_create_widget.


2003-12-12  Callum McKenzie  <callum@physics.otago.ac.nz>

	* src/strategy.cpp: Removed the #include of <iostream> since it
	doesn't seem to be used and was causing some people compile
	problems. Fixes bug #128729.

2003-12-08  Callum McKenzie  <callum@physics.otago.ac.nz>

	* NEWS: 2.5.2

2003-12-04  Callum McKenzie  <callum@physics.otago.ac.nz>

	* games-files.c:
	* games-files.h: Add new routines (and rework some old ones) for
	finding images in a path and for dealing for cleanly with common
	UI work.

2003-11-27  Callum McKenzie  <callum@physics.otago.ac.nz>

	* gdk-card-image.c: Moved the games_get_file_list code out to a library.

	* games-files.c:
	* games-files.h: New routines (and files) for searching paths.

2003-11-26  Callum McKenzie  <callum@physics.otago.ac.nz>

	* gdk-card-image.c: Removed some unnecessary code and fixed a bug
	where the first selection would fail if the default style was the
	current style when the preferences were opened.

2003-11-25  Callum McKenzie  <callum@physics.otago.ac.nz>

	* gdk-card-image.c (gtk_card_deck_options_edit_set): Get _edit_set
	to find the a matching style, if any. Also make the selection
	finally work properly and not reset the moment the dialog is
	opened.

2003-11-24  Callum McKenzie  <callum@physics.otago.ac.nz>

	* gdk-card-iamge.c (gdk_card_deck_options_edit_get_card_styles):
	* card-style-file.h:
	* card-style-file.c (card_style_compare): Sort the style list and
	add an API call to card-style to assist this.

	* card-styles.xml: Added more styles.

	* gdk-card-image.c (gtk_card_deck_options_edit_create_list): And
	another Heisenbug fixed. Make sure gtk_list_store gets the correct
	type to store.

	* card-style-file.h (NUM_COMPONENTS): Heisenbug! I wish I had read
	my own comment.

2003-11-23  Callum McKenzie  <callum@physics.otago.ac.nz>

	* gdk-card-image.c: Rearranged to put all the
	gtk_card_deck_options_edit stuff together.

2003-11-23  Callum McKenzie  <callum@physics.otago.ac.nz>

	* card-style-file.c:
	* card-style-file.h:
	* gdk-card-image.c: Start cleaning up my code from last night. The
	definition and parsing of card style files has been moved into
	it's own file and is free of nasty global variables and might even
	be thread safe.

2003-11-22  Callum McKenzie  <callum@physics.otago.ac.nz>

	* gdk-card-image.c: The rough cut of the new card style selection
	widget. Known to work for aisleriot and should work for blackjack,
	but is inherently broken (it uses globals to store the state of
	the object). Good proof-of-principle though.

	* card-styles.xml: Created and added to the distribution.

2003-11-17  Callum McKenzie  <callum@physics.otago.ac.nz>

	* NEWS: Updated for 2.5.1.

2003-11-13  William Jon McCann  <mccann@jhu.edu>

	* help/C/blackjack.xml: Document keyboard controls.

	* src/hand.cpp (bj_hand_show_dealer_probabilities): Add a check
	to make sure the dealer has a card first.

	* src/player.cpp (showOptions):
	(showProbabilities): Add labels, reduce precision, and use percentage
	symbols as suggested by Damon Brodie.

2003-10-27  Callum McKenzie  <callum@physics.otago.ac.nz>

	* gdk-card-image.c (gdk_card_deck_new): Applied a patch from Mark
	Schreiber to catch the case where the card images are missing.

2003-10-21  Callum McKenzie  <callum@physics.otago.ac.nz>

	* README:
	* NEWS: Updated for the 2.5.0 release.

2003-10-12  Callum McKenzie  <callum@physics.otago.ac.nz>

	* NEWS: 2.4.1.

	* TODO: Actually update the TODO file to get rid of the 2.4 stuff
	(and merge back the unfinished bits).

2003-09-09  Callum McKenzie  <callum@physics.otago.ac.nz>

	* NEWS: Two-point-four-point-oooooooooh !
	* TODO: Synchronised with reality.

2003-09-01  Callum McKenzie  <callum@physics.otago.ac.nz>

	* NEWS: It's time for 2.3.90.

2003-08-25  William Jon McCann  <mccann@jhu.edu>

	* help/C/figures/blackjack_start_window.png:
	* help/C/figures/blackjack_win_window.png: Changed help screenshots
	to use simple theme as it seems like this is the de facto standard
	for 2.4

2003-08-24  Callum McKenzie  <callum@physics.otago.ac.nz>

	* NEWS: Added an entry for 2.3.8.

2003-08-10  Callum McKenzie  <callum@physics.otago.ac.nz>

	* NEWS: Updated for 2.3.7.

2003-08-09  Callum McKenzie  <callum@physics.otago.ac.nz>

	* README: Complete rewrite for 2.4.

2003-08-02  Callum McKenzie  <callum@physics.otago.ac.nz>

	* C/blackjack.xml: Minor fixup to remove some useless boiler-plate
	text.

2003-07-11  Callum McKenzie  <callum@physics.otago.ac.nz>

	* NEWS: Updated for 2.3.5.

2003-07-10  Callum McKenzie  <callum@physics.otago.ac.nz>

	* data/blackjack.desktop.in: Update name to fit HIG (bug 116916).

2003-07-07  William Jon McCann  <mccann@jhu.edu>

	* src/events.cpp (bj_event_expose_callback)
	(bj_event_enter_notify):
	* src/blackjack.cpp (bj_quit_app): Added return values to fix
	Sun build errors.

	* src/strategy.h: One more line for the Sun Forte build fix.

	* src/game.cpp (bj_game_find_rules): Rewrote function to remove
	scandir/alphasort dependency.

2003-07-06  William Jon McCann  <mccann@jhu.edu>

	* src/strategy.h: Fix for Sun Forte build errors from Eric.

2003-06-22  Callum McKenzie  <callum@physics.otago.ac.nz>

	* data/blackjack.schemas.in: Remove full-stop from the end of
	short descriptions.

2003-06-21  Callum McKenzie  <callum@physics.otago.ac.nz>

	* gdk-card-image.c: Compile warning cleanups and deprecated
	function removal.

2003-06-19  William Jon McCann  <mccann@jhu.edu>

	* src/card.cpp (bj_card_load_pixmaps):
	* src/slot.cpp (bj_slot_load_pixmaps): Use g_build_filename to make paths.

	* src/blackjack.cpp (main): g_build_filename needs to be NULL terminated.

2003-06-18  William Jon McCann  <mccann@jhu.edu>

	* TODO: Update.

2003-06-17  William Jon McCann  <mccann@jhu.edu>

	* TODO: Updated with results of this round of compiler warning
	fixes.

	* gdk-card-image.c (gdk_card_deck_dir_search): Use
	g_build_filename to construct paths.

	* src/blackjack.c:
	* src/blackjack.h (BJ_RULES_DIR): Remove slash from directory.
	We will let g_build_filename add directory separators.

	* src/game.cpp (bj_game_find_and_read_rules)
	(bj_game_eval_installed_file): Use g_build_filename to construct
	paths.

	* src/strategy.cpp: Fixed compiler warning and converted
	to UNIX format line ending.

	* src/splash.cpp (expose_event):
	* src/player.cpp (showOptions):
	* src/hand.cpp (bj_hand_get_best_option_string):
	* src/game.cpp (bj_game_find_rules):
	* src/draw.cpp (bj_draw_chips): Fixed compiler warnings.

	* src/menu.cpp:
	* src/dialog.cpp:
	* src/blackjack.cpp:
	* src/game.cpp: Only use splash window when we aren't
	using a cache file.

2003-06-16  William Jon McCann  <mccann@jhu.edu>

	* src/blackjack.h: Fix typo.

	* src/dialog.cpp (show_preferences_dialog): Use mnemonics
	in preferences notebook tab labels.

2003-06-13  Callum McKenzie  <callum@physics.otago.ac.nz>

	* TODO: Massive update to hopefully include every known issue and
	bug and where it stands in terms of the 2.4 and 2.5 releases.

2003-06-13  William Jon McCann  <mccann@jhu.edu>

	* TODO (Blackjack): Removed fixed items.

	* src/dialog.cpp (select_rule_cb): Make dialog insensitive
	while loading new rules.

	* data/blackjack.schemas.in:  Install gconf schemas.

	* src/blackjack.cpp: #define gconf key names.

2003-06-11  Callum McKenzie  <callum@physics.otago.ac.nz>

	* src/menu.cpp:
	* src/blackjack.cpp: i18n fixes from Christian Neumair (bug #114875).

2003-06-09  William Jon McCann  <mccann@jhu.edu>

	* src/dialog.cpp:
	* src/game.cpp: Removed separator from dialogs as in HIG.

2003-06-07  William Jon McCann  <mccann@jhu.edu>

	* src/game.cpp (bj_game_eval_installed_file): Use HIG
	markup in error dialog.

	* src/dialog.cpp (show_preferences_dialog): HIG spacing
	tweak.

	* src/player.cpp (showOptions): Fixed i18n string issue.

	* src/blackjack.cpp: Keep local state information,
	removed quit confirmation dialog, use toolbar setting
	at startup.

	* src/dialog.cpp (pref_dialog_response): Make card
	preferences instant apply.

	* gdk-card-image.h:
	* gdk-card-image.c:
	I have made gdk_card_deck_options_edit a proper GTK widget (and it
	is now called gtk_card_deck_options_edit) without the dependence
	on having a notebook to fit into. Also used 2.0 API rather than
	the 1.x one. I have also removed the "dirty" call since it was in
	the way and we should be responding to the "changed" signal
	anyway.

2003-06-07  Callum McKenzie  <callum@physics.otago.ac.nz>

	* src/menu.cpp:
	* src/dialog.cpp:
	Fixes to make dialogs be presented properly. Fixes bug #114623.

	* src/dialog.cpp: Updated to use the revised
	gtk_card_deck_blah_blah API.

2003-06-06  Callum McKenzie  <callum@physics.otago.ac.nz>

	* MAINTAINERS: Updated.

2003-06-04  William Jon McCann  <mccann@jhu.edu>

	* src/dialog.cpp: Added all rule fields to tree view in pref
	dialog so that rules should be mostly self documented.  Also
	removed unused functions and HIGified alerts.

	* src/game.h:
	* src/game.cpp: Added new functions to load rules from file.
	Added new BJGameRules class derived from BJRules that holds
	all rule attributes.

	* src/strategy.h:
	* src/strategy.cpp: Added get methods for private variables.

	* data/Vegas_Strip.rules: Change to allow double after split,
	surrender, and resplitting aces.  This should not affect the
	cached rules file.

2003-06-03  Callum McKenzie  <callum@physics.otago.ac.nz>

	* src/dialog.cpp:
	* src/game.cpp:
	* src/hand.cpp:
	* src/menu.cpp:
	* src/player.cpp:
	* src/blackjack.cpp:
	* src/events.cpp: Fixes to remove compiler warnings.  Also made
	i18n changes as per Christian Rose's suggestions. Also removed
	score stuff since it isn't used.

    * [gdk-card-image]: Added new pixmaps, including the
	spectacular Dondorf set. Originally from the PySol program.

	* README: Updated for 2.3.3

2003-06-02  William Jon McCann  <mccann@jhu.edu>

	* src/events.cpp: Improved appbar text tips shown when hovering
	over objects in playing area.

2003-06-02  Callum McKenzie  <callum@physics.otago.ac.nz>

	* src/chips.cpp: If we're going to use sqrt, we'd better include
	math.h.

2003-05-16  Callum McKenzie  <callum@physics.otago.ac.nz>

	* gdk-card-image.c: Trying to solve multi-platform build problems
	by using generic glib functions (and thereby making it glib's
	problem to try and figure out whether to include dirent.h or
	not). This should fix bug #111225 and several others.

2003-05-14  Callum McKenzie  <callum@physics.otago.ac.nz>

	* [gdk-card-image]: Added a generic card game icon (it had been floating
	around the gnome-desktop module and needed a new home).

2003-05-13  Callum McKenzie  <callum@physics.otago.ac.nz>

	* gdk-card-image.h: Added C++ guards so that C++ code can use
	it. Do I have something in mind ? No of course not, there is no
	blackjack game that needs C++ support.

2003-05-07  Callum McKenzie  <callum@physics.otago.ac.nz>

	* gdk-card-image.c: Hopefully the ifdefs are a bit more friendly
	to NetBSD and don't break anything else. Hopefully resolves bug
	#111225.

2003-04-06  Ross Burton  <ross@burtonini.com>

	* gdk-card-image.c: Don't use #elif for Sun. Thanks to Rick
	Burridge, closing #109988.

2003-02-24  Theo van Klaveren  <t.vanklaveren@student.utwente.nl>

	* gdk-card-image.c: Include <sys/types.h> if it is present.
	Conditionally include <dirent.h> on FreeBSD. Kludgey, but I can't
	think of any other way. Fixes compile on FreeBSD. Closes #106963.

2002-07-04  Ross Burton  <ross@burtonini.com>

	* gdk-card-image.c: Bad hacky mojo to fix building on OSF/1
	(closes #77903).

2002-06-05  Bastien Nocera  <hadess@hadess.net>

	* gdk-card-image.c: (gdk_card_deck_dir_search),
	(gdk_card_deck_file_load): make sure it works if freecell isn't
	installed in the libgnome prefix

2002-04-16  Bastien Nocera  <hadess@hadess.net>

	* gdk-card-image.c: (is_image): revert previous change about gnome-vfs
	and include gnome-vfs-mime.h header

2002-04-16  Bastien Nocera  <hadess@hadess.net>

	* gdk-card-image.c: (gdk_card_deck_get_type), (is_image):
	* gdk-card-image.h: fix headers and use proper gnome-vfs function,
	use a GtkType instead of a guint for gdk_card_get_type
	(Closes: #77902)

2001-12-16  Juan Pablo Mendoza <jpablo@gnome.org>

	* gdk-card-image.c: Fix bad formated comment.

2001-07-07  Juan Pablo Mendoza <pablo_juan@yahoo.com>

	* gdk-card-image.c: Killed Imlib.

Tue Feb 06 16:51:19 2001  George Lebl <jirka@5z.com>

	* gdk-card-image.c: Deal with errors and missing files/directories
	  correctly.  Use gnome-mime instead of g_is_image_filename to
	  avoid warning.

1999-02-20  Jonathan Blandford  <jrb@redhat.com>

	* gdk-card-image.c: limited the number of cards available
	for small and medium suit vals.
	(make_suit): remove small image from joker -- just 2 black jokers
	and 2 red jokers instead.

1998-12-08  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* gdk-card-image.c (gdk_imlib_rotate_image_180): Small fix to the
	new imlib api.  This should not be poking with Imlib internals in
	the first place.

Sat Nov 21 Felix Bellaby <felix@pooh.u-net.com>
	* gdk-card-image.h: Redsigned to use gdk objects, now offers a
 	gtknotebook page for selecting card preferences.
	* gdk-card-image.c: Substantially rewritten.
	* *.png: png based images to replace xpm.

Mon Oct 26 Felix Bellaby <felix@pooh.u-net.com>
	* gdk-card-image.h (gdk_card_image_unref): frees X server refs.
	* gdk-card-image.h (gdk_card_image_back): returns a card back image.
	* gdk-card-image.h (gdk_card_image_{face/mask}): simpler, quicker API.
	* gdk-card-image.c: Brought geometry of images closer to "real" cards.
	Switched to using imlib. Doubled the corner symbols.
	* Cardback{1-5}.xpm: Added masks to card back xpms.
	* Suits.xpm, Pictures.xpm: New xpms for the cards
	* Suits.xpat.xpm, Pictures.xpat.xpm: Reformated versions of old xpms.
